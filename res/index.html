<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>监控</title>
    <script src="jquery.min.js"></script>
    <script>
        var passwd = "";

        function start() {
            if (passwd == "") {
                passwd = $("#passwd").val();
            }
            $.get("api?passwd=" + passwd, function (data) {
//                console.log(data);
                $("#cpuUseage .value").html((100 - (data.cpuIdle * 100)).toFixed(2) + "%");
                $("#memUsed .value").html((data.usedMem / 1024 / 1024).toFixed(2) + "MB");
                $("#memFree .value").html((data.freeMem / 1024 / 1024).toFixed(2) + "MB");
                var rx = data.rx;
                var tx = data.tx;
                var rxNetStatus = "KB/s";
                var txNetStatus = "KB/s";
                if (rx > 1024) {
                    rx = rx / 1024;
                    rxNetStatus = "MB/s";
                }
                if (tx > 1024) {
                    tx = tx / 1024;
                    txNetStatus = "MB/s";
                }
                $("#rx .value").html(rx.toFixed(3) + rxNetStatus);
                $("#tx .value").html(tx.toFixed(3) + txNetStatus);

                $("#diskList .info").html("");
                for (var i = 0; i < data.diskList.length; i++) {
                    var diskInfo = data.diskList[i];
                    $("#diskList .info").append("<div>" + diskInfo.name + " 读取:" + parseFloat(diskInfo.read).toFixed(2) + "MB/s 写入:" + parseFloat(diskInfo.write).toFixed(2) + "MB/s 磁盘使用:" + diskInfo.usage + "</div>");
                }
                setTimeout(start, 1000);
            });
        }
    </script>
</head>
<body>
<div id="cpuUseage">
    <span>CPU使用:</span><span class="value"></span>
</div>
<div id="memUsed">
    <span>物理内存使用:</span><span class="value"></span>
</div>
<div id="memFree">
    <span>物理内存剩余:</span><span class="value"></span>
</div>
<div id="rx">
    <span>下载:</span><span class="value"></span>
</div>
<div id="tx">
    <span>上载:</span><span class="value"></span>
</div>
<div id="diskList">
    <div>磁盘列表</div>
    <div class="info">

    </div>
</div>

<div>
    <div>
        <span>密码</span><input id="passwd" type="text" placeholder="输入密码">
        <button onclick="start()">开始</button>
    </div>
</div>
</body>
</html>